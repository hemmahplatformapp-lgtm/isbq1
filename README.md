# ISBAQ Real-Time Hajj Security & Services Dashboard

ุชู ุชุทููุฑ ูุฐุง ุงููุดุฑูุน ูููุญุฉ ุชุญูู ุชูุงุนููุฉ ูู ุงูููุช ุงููุนูู ููุฑุงูุจุฉ ุงูุญุฌุงุฌ ูุชูุฏูู ุงูุฎุฏูุงุช ุงูุฃูููุฉุ ุจุงุณุชุฎุฏุงู **Flask** ู **PostgreSQL** ู **SocketIO**.

## ููููุฉ ุงููุดุฑูุน

ุชู ุฅุนุงุฏุฉ ุชูุธูู ููููุฉ ุงููุดุฑูุน ูุชุจุณูุท ุนูููุฉ ุงูุชุทููุฑ ูุงููุตู ุจูู ุงููุงุฌูุฉ ุงูุฎูููุฉ ูุงูุฃูุงููุฉ:

```
isbaq_dashboard/
โโโ backend/
โ   โโโ app.py                  # ุชุทุจูู Flask ุงูุฑุฆูุณู ููุญุฑู ุงููุฑุงุฑุงุช
โ   โโโ Dockerfile              # ุจูุงุก ุตูุฑุฉ Docker ูููุงุฌูุฉ ุงูุฎูููุฉ
โ   โโโ entrypoint.sh           # ุณูุฑูุจุช ุชููุฆุฉ ูุงุนุฏุฉ ุงูุจูุงูุงุช
โ   โโโ requirements.txt        # ููุชุจุงุช Python ุงููุทููุจุฉ
โ   โโโ generate_data.py        # ุณูุฑูุจุช ูุชูููุฏ ุจูุงูุงุช ุงููุญุงูุงุฉ
โโโ frontend/
โ   โโโ index.html              # ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ ูููุญุฉ ุงูุชุญูู (PWA)
โ   โโโ static/
โ       โโโ style.css           # ูููุงุช CSS
โ       โโโ script.js           # ููุทู ุงููุงุฌูุฉ ุงูุฃูุงููุฉ ู SocketIO
โ       โโโ service-worker.js   # ูุชูููู PWA
โ       โโโ ...                 # ุฃููููุงุช ููููุงุช ุฃุฎุฑู
โโโ docker-compose.yml          # ููู ุชุดุบูู ุงูุฎุฏูุงุช (Backend ู PostgreSQL)
โโโ .env                        # ููู ูุชุบูุฑุงุช ุงูุจูุฆุฉ (ูุฌุจ ุฅูุดุงุคู)
โโโ pilgrims_data.csv           # ููู ุจูุงูุงุช ุงููุญุงูุงุฉ ุงูุชุงุฑูุฎูุฉ
```

## ุงููุชุทูุจุงุช

*   Docker ู Docker Compose (ููุตู ุจู)
*   Python 3.11+ (ููุชุดุบูู ุงููุญูู)

## ุงูุฅุนุฏุงุฏ ูุงูุชุดุบูู ุจุงุณุชุฎุฏุงู Docker Compose

ุงูุทุฑููุฉ ุงูููุตู ุจูุง ูุชุดุบูู ุงููุดุฑูุน ูู ุจุงุณุชุฎุฏุงู Docker Compose:

1.  **ุฅูุดุงุก ููู ูุชุบูุฑุงุช ุงูุจูุฆุฉ (`.env`):**
    ูู ุจุฅูุดุงุก ููู ุจุงุณู `.env` ูู ุงููุฌูุฏ ุงูุฑุฆูุณู ูููุดุฑูุน (`isbaq_dashboard/`) ูุงููุฃู ุจุงูุจูุงูุงุช ุงูุชุงููุฉ. **ููุงุญุธุฉ:** ูุฐู ุงูููู ูู ุงูุฅุนุฏุงุฏุงุช ุงูุงูุชุฑุงุถูุฉุ ูููููู ุชุบููุฑูุง.

    ```env
    POSTGRES_USER=isbaq_user
    POSTGRES_PASSWORD=isbaq_password
    POSTGRES_DB=isbaq_db
    POSTGRES_HOST=db
    POSTGRES_PORT=5432
    SECRET_KEY=super_secret_key_for_flask
    ```

2.  **ุชูููุฏ ุจูุงูุงุช ุงููุญุงูุงุฉ:**
    ูุฌุจ ุงูุชุฃูุฏ ูู ูุฌูุฏ ููู `pilgrims_data.csv` ูู ุงููุฌูุฏ ุงูุฑุฆูุณู. ุชู ุชูููุฏู ูุณุจููุงุ ูููู ููููู ุฅุนุงุฏุฉ ุชูููุฏู ุจุงุณุชุฎุฏุงู ุงูุณูุฑูุจุช ุงููุฑูู:
    ```bash
    python3 backend/generate_data.py
    ```

3.  **ุจูุงุก ูุชุดุบูู ุงูุฎุฏูุงุช:**
    ูู ุงููุฌูุฏ ุงูุฑุฆูุณู ูููุดุฑูุน (`isbaq_dashboard/`)ุ ูู ุจุชุดุบูู ุงูุฃูุฑ ุงูุชุงูู:
    ```bash
    docker-compose up --build -d
    ```
    ุณูููู ูุฐุง ุงูุฃูุฑ ุจุจูุงุก ุตูุฑุฉ ุงููุงุฌูุฉ ุงูุฎูููุฉุ ูุชุดุบูู ุญุงููุฉ ูุงุนุฏุฉ ุงูุจูุงูุงุช (PostgreSQL)ุ ูุงูุงูุชุธุงุฑ ุญุชู ุชุตุจุญ ุฌุงูุฒุฉุ ุซู ุชุดุบูู ุชุทุจูู Flask.

4.  **ุงููุตูู ุฅูู ููุญุฉ ุงูุชุญูู:**
    ุจูุฌุฑุฏ ุชุดุบูู ุงูุฎุฏูุงุชุ ููููู ุงููุตูู ุฅูู ููุญุฉ ุงูุชุญูู ุนุจุฑ ุงููุชุตูุญ ุนูู ุงูุนููุงู:
    [http://localhost:5000](http://localhost:5000)

5.  **ุฅููุงู ุงูุฎุฏูุงุช:**
    ูุฅููุงู ุงูุฎุฏูุงุช ูุฅุฒุงูุฉ ุงูุญุงููุงุช:
    ```bash
    docker-compose down
    ```

## ูุญุฑู ุงููุฑุงุฑุงุช (Decision Engine) - ุชุญุณูู

ุชู ุชุญุณูู ููุทู ูุญุฑู ุงููุฑุงุฑุงุช ูู ููู `backend/app.py` ููุนูุณ ุฃููููุงุช ุฃูููุฉ ุฃูุซุฑ ุฏูุฉุ ุญูุซ ูุชู ุชุญุฏูุฏ ูุณุชูู ุงูุชูุจูู (Alert) ูุงูุฅุฌุฑุงุก (Action) ุจูุงุกู ุนูู ุงูุชุณูุณู ุงูุชุงูู:

| ุงูุฃููููุฉ | ูุณุชูู ุงูุชูุจูู | ุงูุดุฑุท | ุงูุฅุฌุฑุงุก | ุงูุฃููููุฉ |
| :---: | :---: | :--- | :--- | :---: |
| **1** | **RED** | **ูุฎุงููุฉ ูุณุงุฑ ุญุฑุฌุฉ** (`ground != nusuk`) | ุชูุจูู ูุฎุงููุฉ ูุณุงุฑ ุญุฑุฌุฉุ ุชุญุฏูุฏ ุงููุฎุงูููู ูุฅุฑุณุงู ุฏูุฑูุฉ | ๐จ |
| **2** | **ORANGE** | **ุฅุดุงุฑุฉ ุงุณุชุบุงุซุฉ ููุฑูุฉ** (`sos == True`) | ุชูุจูู ุงุณุชุบุงุซุฉ (SOS)ุ ุฅุฑุณุงู ุฅุณุนุงู ููุฑู | ๐ |
| **3** | **YELLOW** | **ุฎุทุฑ ุฅุฌูุงุฏ ุญุฑุงุฑู** (`temp >= 40.0`) | ุชูุจูู ุฎุทุฑ ุฅุฌูุงุฏ ุญุฑุงุฑูุ ุฅุฑุณุงู ูุฑู ุชุฑุทูุจ | โ๏ธ |
| **4** | **BLUE** | **ููููุฏ/ูููุตู** (`lost_id != None`) | ุชูุจูู ููููุฏ/ูููุตูุ ุฅุดุนุงุฑ ุงูููููุฏ | ๐ค |
| **5** | **GREEN** | **ุขูู** (ุฌููุน ุงูุดุฑูุท ุงูุฃุฎุฑู) | ุขูู ููุทุงุจู ูููุณุงุฑ | โ |

ูุฐุง ุงูุชุณูุณู ูุถูู ุฃู ูุชู ุงูุชุนุงูู ูุน ุงููุฎุงููุงุช ุงูุฃูููุฉ ุงูุญุฑุฌุฉ (RED) ูุงูุงุณุชุบุงุซุงุช ุงูููุฑูุฉ (ORANGE) ุจุฃููููุฉ ูุตูู ูุจู ุงููุฎุงุทุฑ ุงูุตุญูุฉ (YELLOW) ุฃู ุญุงูุงุช ุงูููููุฏูู (BLUE).
